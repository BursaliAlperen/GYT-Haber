<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GYT HABER - Türkiye ve Dünyadan Türkçe Haberler</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0000000000000000" crossorigin="anonymous"></script>
    <!-- REKLAM KODLARI -->
    <script async="async" data-cfasync="false" src="//pl27754051.revenuecpmgate.com/8fc66e8b9e52650daeec923d8057de9a/invoke.js"></script>
    <script type='text/javascript' src='//pl27754061.revenuecpmgate.com/ea/57/e3/ea57e37f75fb301a068f40848717c15e.js'></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header Styles */
        header {
            background: linear-gradient(to right, #1e3c72, #2a5298);
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 28px;
            font-weight: 700;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
            font-size: 32px;
        }
        
        .logo-subtitle {
            font-size: 12px;
            opacity: 0.8;
            margin-left: 10px;
        }
        
        .search-bar {
            display: flex;
            background: white;
            border-radius: 30px;
            overflow: hidden;
            width: 300px;
        }
        
        .search-bar input {
            flex: 1;
            border: none;
            padding: 10px 20px;
            outline: none;
        }
        
        .search-bar button {
            background: #ff6b6b;
            border: none;
            color: white;
            padding: 10px 15px;
            cursor: pointer;
        }
        
        /* Navigation Styles */
        nav {
            background-color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .categories {
            display: flex;
            list-style: none;
        }
        
        .categories li {
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .categories li:hover, .categories li.active {
            background-color: #f9f9f9;
            border-bottom: 3px solid #2a5298;
        }
        
        .date-time {
            color: #666;
            font-size: 14px;
        }
        
        /* REKLAM ALANLARI - GENİŞLETİLMİŞ */
        .ad-container {
            margin: 20px 0;
            text-align: center;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .ad-banner {
            width: 100%;
            max-width: 970px;
            height: 250px;
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            margin: 0 auto;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
        }
        
        .ad-banner-large {
            width: 100%;
            height: 600px;
            background: linear-gradient(45deg, #ff6b6b 0%, #ee5a24 100%);
            margin: 0 auto;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 24px;
            writing-mode: vertical-rl;
            text-orientation: mixed;
        }
        
        .ad-sidebar {
            width: 300px;
            height: 1000px;
            background: linear-gradient(45deg, #27ae60 0%, #2ecc71 100%);
            margin: 0 auto;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
            writing-mode: vertical-rl;
            text-orientation: mixed;
        }
        
        .ad-label {
            font-size: 12px;
            color: #888;
            margin-bottom: 5px;
            text-transform: uppercase;
        }
        
        /* Main Content Layout with Ads */
        .main-layout {
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            gap: 20px;
            margin: 20px 0;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }
        
        .trending-news, .latest-news {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            overflow: hidden;
        }
        
        .section-title {
            padding: 15px 20px;
            background: #2a5298;
            color: white;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .section-title i {
            margin-right: 10px;
        }
        
        .refresh-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        .refresh-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .news-list {
            padding: 20px;
            min-height: 400px;
        }
        
        .news-item {
            display: flex;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .news-item:hover {
            transform: translateX(5px);
        }
        
        .news-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .news-image {
            width: 120px;
            height: 80px;
            border-radius: 5px;
            overflow: hidden;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .news-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .news-content {
            flex: 1;
        }
        
        .news-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
            color: #2a5298;
        }
        
        .news-meta {
            display: flex;
            color: #777;
            font-size: 13px;
            margin-top: 5px;
        }
        
        .news-category {
            background: #ff6b6b;
            color: white;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 12px;
            margin-right: 10px;
        }
        
        .news-source {
            background: #27ae60;
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 11px;
            margin-right: 8px;
        }
        
        /* Devamını Oku Butonu */
        .read-more-btn {
            background: #2a5298;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 10px;
            transition: background 0.3s;
        }
        
        .read-more-btn:hover {
            background: #1e3c72;
        }
        
        /* Haber Detay Modal */
        .news-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .modal-content {
            background: white;
            margin: 50px auto;
            padding: 30px;
            border-radius: 15px;
            max-width: 800px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 30px;
            cursor: pointer;
            color: #666;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: #ff6b6b;
        }
        
        .modal-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }
        
        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: #2a5298;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        
        .modal-meta {
            display: flex;
            align-items: center;
            color: #666;
            font-size: 14px;
        }
        
        .modal-image {
            width: 100%;
            height: 400px;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .modal-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .modal-body {
            font-size: 16px;
            line-height: 1.8;
            color: #444;
        }
        
        .modal-body p {
            margin-bottom: 15px;
        }
        
        /* Breaking News */
        .breaking-news {
            background: #ff6b6b;
            color: white;
            padding: 10px 0;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
        }
        
        .breaking-news-content {
            display: flex;
            align-items: center;
            animation: scroll 30s linear infinite;
        }
        
        .breaking-news-label {
            background: #c0392b;
            padding: 5px 15px;
            font-weight: bold;
            margin-right: 20px;
            white-space: nowrap;
        }
        
        .breaking-news-text {
            white-space: nowrap;
        }
        
        @keyframes scroll {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        
        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #2a5298;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Error State */
        .error-state {
            text-align: center;
            padding: 40px;
            color: #ff6b6b;
        }
        
        .error-state i {
            font-size: 48px;
            margin-bottom: 20px;
        }
        
        /* News Tabs */
        .news-tabs {
            display: flex;
            background: white;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }
        
        .tab.active {
            background: #f8f9fa;
            border-bottom: 3px solid #2a5298;
            font-weight: 600;
        }
        
        .tab:hover {
            background: #f8f9fa;
        }
        
        /* Footer */
        footer {
            background: #1e3c72;
            color: white;
            padding: 40px 0 20px;
            margin-top: 50px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
        }
        
        .footer-section h3 {
            margin-bottom: 20px;
            font-size: 18px;
            position: relative;
            padding-bottom: 10px;
        }
        
        .footer-section h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 2px;
            background: #ff6b6b;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ddd;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: #ff6b6b;
        }
        
        /* Sadece Telegram Butonları */
        .telegram-links {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }
        
        .join-telegram {
            background: #0088cc;
            color: white;
            border: none;
            padding: 12px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
            text-decoration: none;
            font-size: 14px;
        }
        
        .join-telegram:hover {
            background: #0077b3;
            transform: translateY(-2px);
        }
        
        .join-telegram i {
            margin-right: 8px;
            font-size: 16px;
        }
        
        .copyright {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-size: 14px;
            color: #aaa;
        }
        
        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 250px 1fr 250px;
            }
            
            .ad-sidebar {
                width: 250px;
                height: 800px;
            }
            
            .modal-content {
                margin: 20px;
                max-width: 90%;
            }
        }
        
        @media (max-width: 992px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            
            .ad-sidebar {
                display: none;
            }
            
            .footer-content {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .modal-image {
                height: 300px;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .logo {
                margin-bottom: 15px;
            }
            
            .search-bar {
                width: 100%;
                max-width: 300px;
            }
            
            .nav-container {
                flex-direction: column;
            }
            
            .categories {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .date-time {
                margin-top: 10px;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }
            
            .news-tabs {
                flex-direction: column;
            }
            
            .ad-banner {
                height: 180px;
                font-size: 16px;
            }
            
            .ad-banner-large {
                height: 400px;
                font-size: 18px;
            }
            
            .modal-content {
                margin: 10px;
                padding: 20px;
            }
            
            .modal-title {
                font-size: 20px;
            }
            
            .modal-image {
                height: 200px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-newspaper"></i>
                GYT HABER
                <span class="logo-subtitle">Türkiye & Dünya</span>
            </div>
            <div class="search-bar">
                <input type="text" placeholder="Türkçe haber ara...">
                <button><i class="fas fa-search"></i></button>
            </div>
        </div>
    </header>
    
    <!-- Navigation -->
    <nav>
        <div class="container nav-container">
            <ul class="categories">
                <li class="active" data-category="general">Tümü</li>
                <li data-category="business">Ekonomi</li>
                <li data-category="technology">Teknoloji</li>
                <li data-category="sports">Spor</li>
                <li data-category="health">Sağlık</li>
                <li data-category="entertainment">Eğlence</li>
                <li data-category="science">Bilim</li>
            </ul>
            <div class="date-time">
                <span id="current-date"></span>
            </div>
        </div>
    </nav>

    <!-- ÜST BANNER REKLAM -->
    <div class="container">
        <div class="ad-container">
            <div class="ad-label">Reklam</div>
            <div class="ad-banner">
                <!-- REKLAM 1 -->
                <div id="container-8fc66e8b9e52650daeec923d8057de9a"></div>
            </div>
        </div>
    </div>

    <!-- News Tabs -->
    <div class="container">
        <div class="news-tabs">
            <div class="tab active" data-type="turkey">🇹🇷 Türkiye Haberleri</div>
            <div class="tab" data-type="world">🌍 Dünya Haberleri</div>
            <div class="tab" data-type="mixed">🔀 Karışık</div>
        </div>
    </div>
    
    <!-- Breaking News -->
    <div class="breaking-news">
        <div class="breaking-news-content">
            <div class="breaking-news-label">SON DAKİKA</div>
            <div class="breaking-news-text" id="breaking-news-text">Türkçe haberler yükleniyor...</div>
        </div>
    </div>
    
    <!-- ANA İÇERİK - SOL SAĞ REKLAMLARLA -->
    <div class="container main-layout">
        <!-- SOL SİDEBAR REKLAM -->
        <div class="ad-sidebar-container">
            <div class="ad-container">
                <div class="ad-label">Reklam</div>
                <div class="ad-sidebar">
                    <!-- REKLAM 2 -->
                    <script type='text/javascript' src='//pl27754061.revenuecpmgate.com/ea/57/e3/ea57e37f75fb301a068f40848717c15e.js'></script>
                </div>
            </div>
        </div>

        <!-- ORTA - HABER İÇERİĞİ -->
        <div class="main-content">
            <!-- Trending News -->
            <div class="trending-news">
                <div class="section-title">
                    <div>
                        <i class="fas fa-fire"></i>
                        <span id="trending-title">TÜRKİYE'DEN TREND HABERLER</span>
                    </div>
                    <button class="refresh-btn" onclick="loadNews()">
                        <i class="fas fa-sync-alt"></i> Yenile
                    </button>
                </div>
                <div class="news-list" id="trending-news">
                    <div class="loading">
                        <div class="loading-spinner"></div>
                        <p>Hızlı yükleniyor...</p>
                    </div>
                </div>
            </div>
            
            <!-- ORTA REKLAM -->
            <div class="ad-container">
                <div class="ad-label">Sponsor</div>
                <div class="ad-banner-large">
                    <!-- REKLAM 3 -->
                    <div id="container-8fc66e8b9e52650daeec923d8057de9a"></div>
                </div>
            </div>

            <!-- Latest News -->
            <div class="latest-news">
                <div class="section-title">
                    <div>
                        <i class="fas fa-bolt"></i>
                        <span id="latest-title">EN YENİ HABERLER</span>
                    </div>
                    <button class="refresh-btn" onclick="loadNews()">
                        <i class="fas fa-sync-alt"></i> Yenile
                    </button>
                </div>
                
                <div class="news-list" id="latest-news">
                    <div class="loading">
                        <div class="loading-spinner"></div>
                        <p>Hızlı yükleniyor...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SAĞ SİDEBAR REKLAM -->
        <div class="ad-sidebar-container">
            <div class="ad-container">
                <div class="ad-label">Reklam</div>
                <div class="ad-sidebar">
                    <!-- REKLAM 4 -->
                    <script type='text/javascript' src='//pl27754061.revenuecpmgate.com/ea/57/e3/ea57e37f75fb301a068f40848717c15e.js'></script>
                </div>
            </div>
        </div>
    </div>

    <!-- ALT BANNER REKLAM -->
    <div class="container">
        <div class="ad-container">
            <div class="ad-label">Reklam</div>
            <div class="ad-banner">
                <!-- REKLAM 5 -->
                <div id="container-8fc66e8b9e52650daeec923d8057de9a"></div>
            </div>
        </div>
    </div>
    
    <!-- HABER DETAY MODAL -->
    <div id="newsModal" class="news-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle"></h2>
                <div class="modal-meta">
                    <span class="news-category" id="modalCategory"></span>
                    <span class="news-source" id="modalSource"></span>
                    <span><i class="far fa-clock"></i> <span id="modalDate"></span></span>
                </div>
            </div>
            <div class="modal-image">
                <img id="modalImage" src="" alt="">
            </div>
            <div class="modal-body" id="modalContent">
                <!-- Haber içeriği buraya gelecek -->
            </div>
            <!-- MODAL İÇİ REKLAM -->
            <div class="ad-container" style="margin: 30px 0;">
                <div class="ad-label">Reklam</div>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                    <script type='text/javascript' src='//pl27754061.revenuecpmgate.com/ea/57/e3/ea57e37f75fb301a068f40848717c15e.js'></script>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>GYT HABER</h3>
                    <p>Türkiye ve dünyadan en güncel Türkçe haberleri sunuyoruz. Anlık haber akışı ile her zaman güncel kalın.</p>
                    <!-- SADECE TELEGRAM BUTONLARI -->
                    <div class="telegram-links">
                        <a href="https://t.me/sansursuzv" class="join-telegram" target="_blank">
                            <i class="fab fa-telegram"></i> Sansürsüz Haber
                        </a>
                        <a href="https://t.me/haberson2026" class="join-telegram" target="_blank">
                            <i class="fab fa-telegram"></i> Haber Son
                        </a>
                        <a href="https://t.me/sondakikahaber1m" class="join-telegram" target="_blank">
                            <i class="fab fa-telegram"></i> Son Dakika
                        </a>
                        <a href="https://t.me/sansursuzhabere" class="join-telegram" target="_blank">
                            <i class="fab fa-telegram"></i> Sansürsuz Habere
                        </a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3>Haber Kategorileri</h3>
                    <ul class="footer-links">
                        <li><a href="#" data-category="general">Gündem Haberleri</a></li>
                        <li><a href="#" data-category="business">Ekonomi Haberleri</a></li>
                        <li><a href="#" data-category="technology">Teknoloji Haberleri</a></li>
                        <li><a href="#" data-category="sports">Spor Haberleri</a></li>
                        <li><a href="#" data-category="health">Sağlık Haberleri</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Site Haritası</h3>
                    <ul class="footer-links">
                        <li><a href="#">Ana Sayfa</a></li>
                        <li><a href="#">Son Dakika</a></li>
                        <li><a href="#">Gündem</a></li>
                        <li><a href="#">Ekonomi</a></li>
                        <li><a href="#">Spor</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>İletişim & Destek</h3>
                    <ul class="footer-links">
                        <li><a href="#">Hakkımızda</a></li>
                        <li><a href="#">İletişim</a></li>
                        <li><a href="#">Reklam</a></li>
                        <li><a href="#">Gizlilik Politikası</a></li>
                        <li><a href="#">Kullanım Şartları</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                &copy; 2023 GYT HABER - Tüm hakları saklıdır. | Gerçek Zamanlı Türkçe Haber Sistemi
            </div>
        </div>
    </footer>

    <script>
        // ⚡ YENİ OPTİMİZE EDİLMİŞ SİSTEM - HIZLI & GÜNCEL
        let currentCategory = 'general';
        let currentNewsType = 'turkey';
        let allNews = [];
        let lastUpdateTime = 0;

        // TARİH GÜNCELLE
        function updateDateTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            };
            document.getElementById('current-date').textContent = now.toLocaleDateString('tr-TR', options);
        }

        // ⚡ ANA HABER YÜKLEME - OPTİMİZE EDİLMİŞ
        async function loadNews() {
            const startTime = Date.now();
            showLoading(true);
            
            try {
                console.log('⚡ Hızlı haber yükleme başlatıldı...');
                
                // ÖNCE HIZLI MOCK HABERLERLE ANINDA GÖSTER
                const instantNews = await getInstantNews();
                if (instantNews && instantNews.length > 0) {
                    allNews = instantNews;
                    displayNews();
                    document.getElementById('breaking-news-text').textContent = allNews[0].title;
                    console.log(`⚡ Anında ${allNews.length} haber gösterildi`);
                }

                // ARKA PLANDA GÜNCEL HABERLERİ ÇEK
                setTimeout(async () => {
                    try {
                        console.log('🔄 Arka planda güncel haberler çekiliyor...');
                        const freshNews = await fetchFreshNews();
                        if (freshNews && freshNews.length > 0) {
                            allNews = freshNews;
                            displayNews();
                            document.getElementById('breaking-news-text').textContent = allNews[0].title;
                            console.log(`✅ ${freshNews.length} güncel haber yüklendi`);
                        }
                    } catch (error) {
                        console.log('ℹ️ Güncel haberler yüklenemedi, instant haberler kullanılıyor');
                    }
                }, 100);

            } catch (error) {
                console.error('Haber yükleme hatası:', error);
                showError('Haberler yüklenirken geçici bir sorun oluştu. Lütfen yenileyin.');
            } finally {
                const loadTime = Date.now() - startTime;
                console.log(`⏱️ Toplam yükleme süresi: ${loadTime}ms`);
                setTimeout(() => showLoading(false), 500);
            }
        }

        // ⚡ ANINDA GÖSTERİLECEK HABERLER
        async function getInstantNews() {
            // Önceden hazırlanmış güncel mock haberler
            const instantNews = [
                {
                    id: 'instant_1',
                    title: "Türkiye'de Teknoloji Yatırımları Rekor Kırdı - Yapay Zeka Projeleri Hız Kazandı",
                    category: "Teknoloji",
                    image: "https://picsum.photos/300/200?random=101",
                    content: "Yerli teknoloji şirketleri bu yıl rekor yatırım aldı. Yapay zeka ve siber güvenlik alanında 50'den fazla proje hayata geçirildi. Türk mühendisler tarafından geliştirilen yapay zeka çözümleri, uluslararası arenada büyük ilgi görüyor. Özellikle sağlık ve finans sektöründe kullanılan AI teknolojileri, verimlilikte %40 artış sağladı.",
                    fullContent: `
                        <p>Yerli teknoloji şirketleri bu yıl rekor yatırım aldı. Yapay zeka ve siber güvenlik alanında 50'den fazla proje hayata geçirildi. Türk mühendisler tarafından geliştirilen yapay zeka çözümleri, uluslararası arenada büyük ilgi görüyor.</p>
                        
                        <p>Özellikle sağlık ve finans sektöründe kullanılan AI teknolojileri, verimlilikte %40 artış sağladı. Hastane yönetim sistemlerinde kullanılan yapay zeka, hasta bekleme sürelerini %60 azalttı.</p>
                        
                        <p>Finans sektöründe ise dolandırıcılık tespit sistemleri, yapay zeka sayesinde %95 doğruluk oranına ulaştı. Bankalar, müşteri hizmetlerinde chatbot'ları aktif olarak kullanmaya başladı.</p>
                        
                        <p>Siber güvenlik alanında ise Türk şirketleri, dünya çapında 20'den fazla ülkeye hizmet vermeye başladı. Yerli siber güvenlik çözümleri, uluslararası testlerde en iyi performans gösteren sistemler arasında yer aldı.</p>
                        
                        <p>Teknoloji Bakanlığı'nın açıkladığı verilere göre, bu yıl teknoloji sektörüne yapılan yatırım miktarı 5 milyar doları aştı. Bu rakam, geçen yıla göre %35'lik bir artışa işaret ediyor.</p>
                    `,
                    date: "10 dakika önce",
                    source: "GYT Teknoloji",
                    url: "#",
                    trending: true
                },
                {
                    id: 'instant_2', 
                    title: "Merkez Bankası'ndan Ekonomi Açıklaması - Piyasalar Hareketlendi",
                    category: "Ekonomi",
                    image: "https://picsum.photos/300/200?random=102",
                    content: "Merkez Bankası son verileri açıkladı. Enflasyon hedefleri doğrultusunda yeni tedbirler gündemde. Piyasa uzmanları, alınacak kararların döviz kurları üzerinde etkili olacağını belirtiyor.",
                    fullContent: `
                        <p>Merkez Bankası son verileri açıkladı. Enflasyon hedefleri doğrultusunda yeni tedbirler gündemde. Piyasa uzmanları, alınacak kararların döviz kurları üzerinde etkili olacağını belirtiyor.</p>
                        
                        <p>Bankanın açıkladığı son verilere göre, yıllık enflasyon hedefleri doğrultusunda yeni para politikası araçları devreye alınacak. Uzmanlar, bu hamlelerin piyasalarda istikrarı sağlayacağını düşünüyor.</p>
                        
                        <p>Döviz kurlarındaki dalgalanmaların önüne geçmek için alınacak tedbirler arasında rezerv yönetimi ve faiz politikaları öne çıkıyor. Banka yetkilileri, enflasyonla mücadelede kararlı olduklarını vurguladı.</p>
                        
                        <p>Ekonomistler, Merkez Bankası'nın bu hamlelerinin yatırımcı güvenini artıracağını ve Türk Lirası'nın değer kazanacağını öngörüyor. Piyasalardaki olumlu havanın devam etmesi bekleniyor.</p>
                    `,
                    date: "25 dakika önce",
                    source: "GYT Ekonomi",
                    url: "#",
                    trending: true
                },
                {
                    id: 'instant_3',
                    title: "Süper Lig'de Kritik Maçlar - Şampiyonluk Yarısı Kızışıyor",
                    category: "Spor", 
                    image: "https://picsum.photos/300/200?random=103",
                    content: "Spor Toto Süper Lig'in bu haftaki kritik maçları heyecan yarattı. Liderlik mücadelesi iyice kızıştı. Üç takım arasındaki puan farkı 5'in altına indi.",
                    fullContent: `
                        <p>Spor Toto Süper Lig'in bu haftaki kritik maçları heyecan yarattı. Liderlik mücadelesi iyice kızıştı. Üç takım arasındaki puan farkı 5'in altına indi.</p>
                        
                        <p>Ligin son haftalarına doğru şampiyonluk yarışı iyice kızıştı. Lider takım ile üçüncü sıradaki takım arasındaki puan farkı sadece 4 puana kadar düştü. Bu durum, ligin son haftalarının oldukça çekişmeli geçeceğini gösteriyor.</p>
                        
                        <p>Bu hafta oynanan kritik maçlarda sürpriz sonuçlar yaşandı. Lider takım deplasmanda zorlanırken, ikinci sıradaki ekip kendi sahasında önemli bir galibiyet aldı.</p>
                        
                        <p>Teknik direktörler, son haftalara doğru kadro derinliğinin ve sakatlık durumlarının kritik önem taşıdığını belirtiyor. Taraftarlar ise şampiyonluk yarışının son ana kadar süreceğini düşünüyor.</p>
                    `,
                    date: "1 saat önce",
                    source: "GYT Spor",
                    url: "#",
                    trending: true
                }
            ];

            // Kategoriye göre filtrele
            if (currentCategory !== 'general') {
                return instantNews.filter(news => 
                    news.category.toLowerCase() === mapCategory({}, currentCategory).toLowerCase()
                );
            }

            return instantNews;
        }

        // 🔄 GÜNCEL HABERLERİ ÇEK
        async function fetchFreshNews() {
            try {
                // Hızlı API çağrısı - timeout ile
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 5000);
                
                let apiUrl;
                if (currentNewsType === 'turkey') {
                    apiUrl = `https://newsapi.org/v2/top-headlines?country=tr&pageSize=15&category=${currentCategory}&apiKey=10ad0b4fe7234447b7d93cfcf392e732`;
                } else {
                    apiUrl = `https://newsapi.org/v2/top-headlines?country=tr&pageSize=15&apiKey=10ad0b4fe7234447b7d93cfcf392e732`;
                }

                // CORS proxy ile hızlı istek
                const proxyUrl = 'https://api.allorigins.win/raw?url=';
                const response = await fetch(proxyUrl + encodeURIComponent(apiUrl), {
                    signal: controller.signal,
                    headers: {
                        'Accept': 'application/json',
                    }
                });

                clearTimeout(timeoutId);

                if (!response.ok) throw new Error('API hatası');
                
                const data = await response.json();
                
                if (data.status === 'ok' && data.articles && data.articles.length > 0) {
                    return data.articles.map((article, index) => ({
                        id: `fresh_${Date.now()}_${index}`,
                        title: cleanTitle(article.title),
                        category: mapCategory(article, currentCategory),
                        image: article.urlToImage || getDefaultImage(index),
                        content: article.description || 'Haber içeriği yükleniyor...',
                        fullContent: article.content || article.description || 'Haber içeriği mevcut değil.',
                        date: formatRelativeTime(article.publishedAt),
                        source: article.source?.name || 'Haber Kaynağı',
                        url: article.url,
                        trending: index < 3
                    }));
                }

            } catch (error) {
                console.log('Güncel haberler alınamadı, instant haberler kullanılıyor');
            }
            
            return await getInstantNews(); // Fallback
        }

        // HABER GÖSTER
        function displayNews() {
            const trendingContainer = document.getElementById('trending-news');
            const latestContainer = document.getElementById('latest-news');
            
            // Başlıkları güncelle
            document.getElementById('trending-title').textContent = 
                currentNewsType === 'turkey' ? 'TÜRKİYE TREND HABERLER' : 
                currentNewsType === 'world' ? 'DÜNYA TREND HABERLER' : 'TREND HABERLER';
                
            document.getElementById('latest-title').textContent = 
                currentNewsType === 'turkey' ? 'EN YENİ TÜRKİYE HABERLER' : 
                currentNewsType === 'world' ? 'EN YENİ DÜNYA HABERLER' : 'EN YENİ HABERLER';

            // Trend haberler (ilk 5)
            const trendingNews = allNews.slice(0, 5);
            trendingContainer.innerHTML = trendingNews.map(news => createNewsHTML(news, true)).join('');
            
            // En yeni haberler (sonraki 10)
            const latestNews = allNews.slice(5, 15);
            latestContainer.innerHTML = latestNews.map(news => createNewsHTML(news, false)).join('');
            
            console.log('Haberler başarıyla gösterildi');
        }

        // HABER HTML OLUŞTUR
        function createNewsHTML(news, showImage = true) {
            const imageHtml = showImage && news.image ? `
                <div class="news-image">
                    <img src="${news.image}" alt="${news.title}" onerror="this.src='${getDefaultImage(1)}'">
                </div>
            ` : '';
            
            return `
                <div class="news-item">
                    ${imageHtml}
                    <div class="news-content">
                        <div class="news-title" onclick="openModal('${news.id}')">${news.title}</div>
                        <div class="news-meta">
                            <span class="news-category">${news.category}</span>
                            <span class="news-source">${news.source}</span>
                            <span><i class="far fa-clock"></i> ${news.date}</span>
                        </div>
                        <p style="margin-top: 8px; font-size: 14px; color: #666; line-height: 1.4;">
                            ${news.content.substring(0, 100)}...
                        </p>
                        <button class="read-more-btn" onclick="openModal('${news.id}')">
                            <i class="fas fa-book-open"></i> Devamını Oku
                        </button>
                    </div>
                </div>
            `;
        }

        // MODAL İŞLEMLERİ
        function openModal(newsId) {
            const news = allNews.find(n => n.id === newsId);
            if (!news) return;

            document.getElementById('modalTitle').textContent = news.title;
            document.getElementById('modalCategory').textContent = news.category;
            document.getElementById('modalSource').textContent = news.source;
            document.getElementById('modalDate').textContent = news.date;
            document.getElementById('modalImage').src = news.image;
            document.getElementById('modalImage').alt = news.title;
            
            // Tam haber içeriğini göster
            const modalContent = document.getElementById('modalContent');
            if (news.fullContent) {
                modalContent.innerHTML = news.fullContent;
            } else {
                modalContent.innerHTML = `<p>${news.content}</p>`;
            }

            document.getElementById('newsModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('newsModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // YARDIMCI FONKSİYONLAR
        function cleanTitle(title) {
            if (!title) return 'Başlıksız Haber';
            return title.split(' - ')[0]
                       .split(' | ')[0]
                       .replace(/\[.*?\]/g, '')
                       .replace(/https?:\/\/.*$/g, '')
                       .replace(/&amp;/g, '&')
                       .replace(/&quot;/g, '"')
                       .replace(/<[^>]*>/g, '')
                       .trim();
        }

        function mapCategory(article, currentCat) {
            const categoryMap = {
                'business': 'Ekonomi',
                'entertainment': 'Eğlence',
                'health': 'Sağlık',
                'science': 'Bilim',
                'sports': 'Spor',
                'technology': 'Teknoloji',
                'general': 'Gündem'
            };
            return categoryMap[currentCat] || 'Gündem';
        }

        function getDefaultImage(index) {
            const images = [
                'https://picsum.photos/300/200?random=1',
                'https://picsum.photos/300/200?random=2',
                'https://picsum.photos/300/200?random=3',
                'https://picsum.photos/300/200?random=4',
                'https://picsum.photos/300/200?random=5'
            ];
            return images[index % images.length];
        }

        function formatRelativeTime(dateString) {
            if (!dateString) return 'Yakın zamanda';
            
            try {
                const date = new Date(dateString);
                const now = new Date();
                const diffMs = now - date;
                const diffMins = Math.floor(diffMs / 60000);
                const diffHours = Math.floor(diffMs / 3600000);
                
                if (diffMins < 1) return 'Şimdi';
                if (diffMins < 60) return `${diffMins} dakika önce`;
                if (diffHours < 24) return `${diffHours} saat önce`;
                return `${Math.floor(diffHours / 24)} gün önce`;
            } catch {
                return 'Yakın zamanda';
            }
        }

        function showLoading(show) {
            const containers = ['trending-news', 'latest-news'];
            if (show) {
                containers.forEach(container => {
                    document.getElementById(container).innerHTML = `
                        <div class="loading">
                            <div class="loading-spinner"></div>
                            <p>Hızlı yükleniyor...</p>
                        </div>
                    `;
                });
            }
        }

        function showError(message) {
            const containers = ['trending-news', 'latest-news'];
            containers.forEach(container => {
                document.getElementById(container).innerHTML = `
                    <div class="error-state">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>Haberler Yüklenemedi</h3>
                        <p>${message}</p>
                        <button class="refresh-btn" onclick="loadNews()" style="margin-top: 20px; background: #ff6b6b;">
                            <i class="fas fa-sync-alt"></i> Tekrar Dene
                        </button>
                    </div>
                `;
            });
            
            document.getElementById('breaking-news-text').textContent = 'Haberler şu anda yüklenemiyor';
        }

        // SAYFA YÜKLENDİĞİNDE
        document.addEventListener('DOMContentLoaded', function() {
            updateDateTime();
            
            // Hemen haberleri yükle
            loadNews();
            
            // Kategori değiştirme
            document.querySelectorAll('.categories li, .footer-links a[data-category]').forEach(element => {
                element.addEventListener('click', function(e) {
                    e.preventDefault();
                    const category = this.getAttribute('data-category');
                    if (category) {
                        currentCategory = category;
                        document.querySelectorAll('.categories li').forEach(li => li.classList.remove('active'));
                        this.classList.add('active');
                        loadNews();
                    }
                });
            });
            
            // Haber tipi değiştirme
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    currentNewsType = this.getAttribute('data-type');
                    loadNews();
                });
            });
            
            // Arama fonksiyonu
            document.querySelector('.search-bar button').addEventListener('click', function() {
                const query = document.querySelector('.search-bar input').value;
                if (query) {
                    alert(`"${query}" için arama yapılacak (Bu özellik geliştirme aşamasında)`);
                }
            });
            
            // Modal dışına tıklayınca kapat
            document.getElementById('newsModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });
            
            // ESC tuşu ile modal kapat
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                }
            });
            
            // Her 10 dakikada bir haberleri yenile
            setInterval(() => {
                loadNews();
            }, 10 * 60 * 1000);
            
            // Her dakika tarihi güncelle
            setInterval(updateDateTime, 60000);
        });
    </script>
</body>
</html>
